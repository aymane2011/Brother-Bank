<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Brother Bank | النظام البيئي المالي</title>
    
    <!-- تسريع الاتصال بالخوادم -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://www.gstatic.com" crossorigin>

    <!-- الخطوط والأيقونات -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- ملف التصميم -->
    <link rel="stylesheet" href="style.css">
    
    <!-- مكتبة الرسوم البيانية (تأخير التحميل لتسريع الصفحة) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js" defer></script>
</head>
<body>

    <!-- شاشة التحميل (تظهر وتختفي بنعومة) -->
    <div id="loader">
        <div class="spinner-box">
            <div class="leo-border-1">
                <div class="leo-core-1"></div>
            </div> 
            <div class="leo-border-2">
                <div class="leo-core-2"></div>
            </div> 
        </div>
        <div class="loading-text">جاري الاتصال بالنظام البنكي الآمن...</div>
    </div>

    <!-- 1. صفحة الدخول (الافتراضية) -->
    <section id="auth-section" class="section-active">
        <div class="auth-wrapper">
            <!-- خلفية متحركة -->
            <div class="bg-shapes">
                <div class="shape s1"></div>
                <div class="shape s2"></div>
                <div class="shape s3"></div>
            </div>

            <div class="glass-card">
                <div class="brand-header">
                    <div class="logo-icon">BB</div>
                    <h1>Brother Bank</h1>
                    <p>الجيل الجديد من الخدمات المالية</p>
                </div>

                <div class="login-actions">
                    <button id="google-login" class="btn-google-official">
                        <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google">
                        <span>المتابعة باستخدام Google</span>
                    </button>

                    <div class="divider"><span>أو</span></div>

                    <div class="input-float">
                        <input type="email" id="email" required placeholder=" ">
                        <label>البريد الإلكتروني</label>
                        <i class="fas fa-at"></i>
                    </div>

                    <div class="input-float">
                        <input type="password" id="password" required placeholder=" ">
                        <label>كلمة المرور</label>
                        <i class="fas fa-lock"></i>
                    </div>

                    <button id="email-login" class="btn-main-glow">
                        دخول آمن <i class="fas fa-shield-alt"></i>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- 2. صفحة إصدار البطاقة (مخفية) -->
    <section id="onboarding-section" class="hidden">
        <div class="onboarding-container">
            <h2 class="animate-up">مرحباً بك في النخبة</h2>
            <p class="animate-up delay-1">جاري صك هويتك الرقمية الفريدة...</p>
            
            <div class="card-3d-wrap animate-up delay-2">
                <div class="visa-card-pro">
                    <div class="card-bg-design"></div>
                    <div class="top-row">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/5/5e/Visa_Inc._logo.svg" class="visa-logo" alt="Visa">
                        <span class="bank-name">Brother Bank</span>
                    </div>
                    <div class="chip-row">
                        <div class="chip"></div>
                        <i class="fas fa-wifi contactless"></i>
                    </div>
                    <div class="number-row" id="disp-card-number">#### #### #### ####</div>
                    <div class="bottom-row">
                        <div class="holder-info">
                            <label>CARD HOLDER</label>
                            <span id="disp-card-name">YOUR NAME</span>
                        </div>
                        <div class="expiry-info">
                            <label>EXPIRES</label>
                            <span id="disp-card-exp">MM/YY</span>
                        </div>
                    </div>
                </div>
            </div>

            <button id="confirm-identity" class="btn-gold animate-up delay-3">استلام البطاقة والدخول</button>
        </div>
    </section>

    <!-- 3. لوحة التحكم (مخفية) -->
    <section id="dashboard-section" class="hidden">
        <nav class="bottom-nav">
            <a onclick="switchTab('home')" class="nav-item active"><i class="fas fa-wallet"></i></a>
            <a onclick="switchTab('trade')" class="nav-item"><i class="fas fa-chart-area"></i></a>
            <a onclick="switchTab('transfer')" class="nav-item"><i class="fas fa-qrcode"></i></a>
            <a onclick="logout()" class="nav-item logout"><i class="fas fa-power-off"></i></a>
        </nav>

        <main class="app-content">
            <!-- تبويب الرئيسية -->
            <div id="home-tab" class="tab-view active-view">
                <header class="dash-header">
                    <div class="user-profile">
                        <div class="avatar" id="user-avatar">U</div>
                        <div class="texts">
                            <small>مرحباً بك،</small>
                            <h3 id="dash-username">User</h3>
                        </div>
                    </div>
                    <div class="notif-bell"><i class="far fa-bell"></i></div>
                </header>

                <div class="total-balance-card">
                    <small>إجمالي الثروة</small>
                    <h1 id="total-balance">0.00 <span class="currency">MAD</span></h1>
                    <div class="balance-trend up">+2.5% <i class="fas fa-arrow-trend-up"></i></div>
                </div>

                <div class="bonus-area">
                    <button id="claim-bonus" class="bonus-btn">
                        <div class="icon-box"><i class="fas fa-gift"></i></div>
                        <div class="text-box">
                            <strong>المكافأة اليومية</strong>
                            <small id="bonus-timer">اضغط للحصول على 1,000,000</small>
                        </div>
                        <div class="arrow"><i class="fas fa-chevron-left"></i></div>
                    </button>
                </div>

                <div class="assets-grid">
                    <h3>الأصول الحية</h3>
                    <div class="asset-card">
                        <div class="icon usd"><i class="fas fa-dollar-sign"></i></div>
                        <div class="info">
                            <span>USD Dollar</span>
                            <strong id="usd-balance">0.00</strong>
                        </div>
                    </div>
                    <div class="asset-card">
                        <div class="icon eur"><i class="fas fa-euro-sign"></i></div>
                        <div class="info">
                            <span>Euro</span>
                            <strong id="eur-balance">0.00</strong>
                        </div>
                    </div>
                </div>
            </div>

            <!-- تبويب التداول -->
            <div id="trade-tab" class="tab-view">
                <h2 class="page-title">التداول الحي</h2>
                <div class="chart-wrapper">
                    <canvas id="tradingChart"></canvas>
                </div>
                <div class="trade-actions">
                    <button class="trade-btn buy" onclick="trade('buy')">
                        <span>شراء (صعود)</span>
                        <small>السعر سيرتفع</small>
                    </button>
                    <button class="trade-btn sell" onclick="trade('sell')">
                        <span>بيع (هبوط)</span>
                        <small>السعر سينخفض</small>
                    </button>
                </div>
                <div id="trade-result" class="trade-status"></div>
            </div>

            <!-- تبويب التحويل -->
            <div id="transfer-tab" class="tab-view">
                <h2 class="page-title">استلام وتحويل</h2>
                <div class="qr-container">
                    <div class="qr-frame">
                        <img src="" id="my-qr" alt="QR">
                    </div>
                    <p>شارك هذا الكود لاستلام الأموال</p>
                </div>
                <div class="send-money-form">
                    <h3>إرسال سريع</h3>
                    <input type="text" class="pro-input" placeholder="رقم البطاقة (16 رقم)">
                    <input type="number" class="pro-input" placeholder="المبلغ (MAD)">
                    <button class="btn-main-glow">تأكيد التحويل</button>
                </div>
            </div>
        </main>
    </section>

    <!-- ملف السكريبت من نوع module -->
    <script type="module" src="script.js"></script>
</body>
</html>